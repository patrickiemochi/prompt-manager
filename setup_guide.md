# æç¤ºè©ç®¡ç†ç³»çµ± - å®Œæ•´è¨­ç½®æŒ‡å—

## ğŸ¯ ç³»çµ±æ¦‚è¿°

é€™æ˜¯ä¸€å€‹å®Œæ•´çš„ AI ç¹ªåœ–æç¤ºè©ç®¡ç†ç³»çµ±ï¼ŒåŒ…å«ï¼š
- iPhone/Mac æ·å¾‘è¼¸å…¥
- n8n è‡ªå‹•åŒ–å·¥ä½œæµï¼ˆèªè¨€åˆ¤åˆ¥ã€ç¿»è­¯ã€åœ–ç‰‡æœå°‹ï¼‰
- Supabase PostgreSQL è³‡æ–™åº«
- React ç¶²é ç®¡ç†ä»‹é¢
- æ™ºèƒ½åŒ¯å‡ºï¼ˆæ”¯æ´ Fluxã€SDXL æ ¼å¼ï¼‰

---

## ğŸ“‹ ç¬¬ä¸€æ­¥ï¼šSupabase è¨­ç½®ï¼ˆ5 åˆ†é˜ï¼‰

### 1.1 å»ºç«‹ Supabase å¸³æˆ¶
```
ç¶²å€: https://supabase.com
- ç”¨ GitHub/Google ç™»å…¥ï¼ˆæ¨è–¦ï¼‰
- å»ºç«‹æ–°çš„ Project
- é¸æ“‡ Free Plan
```

### 1.2 è¤‡è£½é€™å€‹ SQL åˆ° SQL Editor å»ºç«‹è³‡æ–™åº«è¡¨æ ¼

```sql
-- å»ºç«‹ä¸»è¡¨ï¼šæç¤ºè©åº«
CREATE TABLE IF NOT EXISTS prompts (
  id BIGINT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
  english_text TEXT NOT NULL,
  chinese_text TEXT NOT NULL,
  image_url TEXT,
  category TEXT NOT NULL,
  sub_category TEXT,
  source_app TEXT,
  usage_count INT DEFAULT 0,
  is_duplicate BOOLEAN DEFAULT FALSE,
  duplicate_of BIGINT REFERENCES prompts(id),
  created_at TIMESTAMP WITH TIME ZONE DEFAULT TIMEZONE('utc'::text, NOW()),
  updated_at TIMESTAMP WITH TIME ZONE DEFAULT TIMEZONE('utc'::text, NOW()),
  is_active BOOLEAN DEFAULT TRUE
);

-- å»ºç«‹åˆ†é¡è¡¨
CREATE TABLE IF NOT EXISTS categories (
  id BIGINT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
  name TEXT NOT NULL UNIQUE,
  sub_categories TEXT[] DEFAULT ARRAY[]::TEXT[],
  ai_model TEXT NOT NULL DEFAULT 'all',
  description TEXT,
  order_index INT DEFAULT 0
);

-- å»ºç«‹åŒ¯å‡ºè¨˜éŒ„è¡¨
CREATE TABLE IF NOT EXISTS export_logs (
  id BIGINT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
  export_format TEXT NOT NULL,
  selected_prompts INT,
  exported_text TEXT NOT NULL,
  created_at TIMESTAMP WITH TIME ZONE DEFAULT TIMEZONE('utc'::text, NOW())
);

-- æ’å…¥é è¨­åˆ†é¡
INSERT INTO categories (name, sub_categories, ai_model, order_index) VALUES
('äººç‰©', ARRAY['å¹´é½¡', 'ç‰¹å¾µ', 'è£æ‰®', 'è¡¨æƒ…'], 'all', 1),
('é¢¨æ™¯', ARRAY['å ´æ™¯', 'æ™‚é–“', 'æ°›åœ'], 'all', 2),
('ç•«é¢¨', ARRAY['è—è¡“é¢¨æ ¼', 'é¢¨æ ¼æµæ´¾', 'çŸ¥åç•«å®¶'], 'all', 3),
('ç•«è³ªæå‡', ARRAY['è§£æåº¦', 'ç´°ç¯€', 'ç‰¹æ•ˆ'], 'flux', 4),
('å…‰å½±', ARRAY['å…‰æº', 'è‰²æº«'], 'all', 5),
('æƒ…æ„Ÿ&æ°›åœ', ARRAY['æƒ…ç·’', 'è‰²èª¿'], 'all', 6),
('æŠ€è¡“æ¨™ç±¤', ARRAY['æ¨¡å‹', 'åƒæ•¸'], 'all', 7);

-- å»ºç«‹ç´¢å¼•ä»¥æå‡æŸ¥è©¢é€Ÿåº¦
CREATE INDEX idx_prompts_category ON prompts(category);
CREATE INDEX idx_prompts_english ON prompts USING GIN(to_tsvector('english', english_text));
CREATE INDEX idx_prompts_chinese ON prompts USING GIN(to_tsvector('chinese', chinese_text));

-- å•Ÿç”¨ RLSï¼ˆè¡Œç´šå®‰å…¨ï¼‰- åŸºæœ¬è¨­ç½®ï¼Œç¨å¾Œå¯æ ¹æ“šéœ€è¦èª¿æ•´
ALTER TABLE prompts ENABLE ROW LEVEL SECURITY;
ALTER TABLE categories ENABLE ROW LEVEL SECURITY;
ALTER TABLE export_logs ENABLE ROW LEVEL SECURITY;

-- å»ºç«‹å…¬é–‹è¨ªå• policyï¼ˆæš«æ™‚å…è¨±æ‰€æœ‰è¨ªå•ï¼Œä¹‹å¾Œå¯åŠ å…¥èº«ä»½é©—è­‰ï¼‰
CREATE POLICY "Enable read access for all users" ON prompts
  FOR SELECT USING (true);

CREATE POLICY "Enable insert for all users" ON prompts
  FOR INSERT WITH CHECK (true);

CREATE POLICY "Enable update for all users" ON prompts
  FOR UPDATE USING (true);

CREATE POLICY "Enable delete for all users" ON prompts
  FOR DELETE USING (true);

CREATE POLICY "Enable read access for categories" ON categories
  FOR SELECT USING (true);

CREATE POLICY "Enable read access for export logs" ON export_logs
  FOR SELECT USING (true);

CREATE POLICY "Enable insert for export logs" ON export_logs
  FOR INSERT WITH CHECK (true);
```

### 1.3 å–å¾— Supabase é€£ç·šè³‡è¨Š

åœ¨ Supabase Dashboard çš„ **Settings â†’ API** ä¸­è¤‡è£½ï¼š
- **Project URL**: `https://your-project.supabase.co`
- **Anon Key**: `eyJhbGci...`ï¼ˆå…¬é–‹ API å¯†é‘°ï¼‰

ä¿å­˜é€™å…©å€‹å€¼ï¼Œç¶²é ç¨‹å¼éœ€è¦ï¼

---

## ğŸ’» ç¬¬äºŒæ­¥ï¼šéƒ¨ç½²ç¶²é ç¨‹å¼

### æ–¹æ¡ˆ Aï¼šVercelï¼ˆæ¨è–¦ï¼Œæœ€ç°¡å–®ï¼‰

1. **ç™»å…¥ Vercel**
   ```
   https://vercel.com
   ç”¨ GitHub å¸³æˆ¶ç™»å…¥
   ```

2. **æº–å‚™éƒ¨ç½²**
   - å°‡ç¶²é ç¨‹å¼ä»£ç¢¼ä¸Šå‚³åˆ° GitHub
   - åœ¨ Vercel ä¸­é» "Import Project"
   - é¸æ“‡ä½ çš„ GitHub repo
   - è¨­å®šç’°å¢ƒè®Šæ•¸ï¼ˆä¸‹é¢æœƒèªªï¼‰

### æ–¹æ¡ˆ Bï¼šDockerï¼ˆè‡ªå·±çš„æœå‹™å™¨ï¼‰

```bash
# åœ¨ä½ çš„ Mac mini ä¸Š
docker build -t prompt-manager .
docker run -p 3000:3000 \
  -e REACT_APP_SUPABASE_URL=your_url \
  -e REACT_APP_SUPABASE_ANON_KEY=your_key \
  prompt-manager
```

### ç’°å¢ƒè®Šæ•¸è¨­ç½®ï¼ˆå…©ç¨®æ–¹æ¡ˆéƒ½éœ€è¦ï¼‰

åœ¨éƒ¨ç½²å¹³å°è¨­å®šé€™äº›è®Šæ•¸ï¼š

```
REACT_APP_SUPABASE_URL=https://your-project.supabase.co
REACT_APP_SUPABASE_ANON_KEY=your_anon_key_here
```

---

## ğŸ”„ ç¬¬ä¸‰æ­¥ï¼šn8n å·¥ä½œæµè¨­ç½®

### 3.1 å·¥ä½œæµé‚è¼¯

```
Webhook è§¸ç™¼ï¼ˆä¾†è‡ªæ·å¾‘ï¼‰
  â†“
[åˆ¤åˆ¥èªè¨€] ç”¨ç°¡å–®è¦å‰‡æˆ– AI
  â†“
[ç¿»è­¯] Google Translate API
  â†“
[æœå°‹åœ–ç‰‡] Unsplash API
  â†“
[æª¢æŸ¥é‡è¤‡] æŸ¥è©¢ Supabase
  â†“
[å„²å­˜] å¯«å…¥ Supabase
```

### 3.2 éœ€è¦çš„ API Key

1. **Google Cloud API** - ç¿»è­¯å’Œèªè¨€æª¢æ¸¬
   ```
   https://cloud.google.com/docs/authentication
   å•Ÿç”¨: Translation API, Natural Language API
   ```

2. **Unsplash API** - åœ–ç‰‡æœå°‹
   ```
   https://unsplash.com/oauth/applications
   ç”³è«‹å…è²»é–‹ç™¼è€…å¸³æˆ¶
   ```

3. **Supabase Connection**
   ```
   PostgreSQL é€£ç·šå­—ä¸²ï¼ˆåœ¨ Supabase è¨­å®šä¸­ï¼‰
   ```

### 3.3 n8n å·¥ä½œæµæœƒåœ¨ä¸‹ä¸€æ­¥æä¾›

---

## ğŸ“± ç¬¬å››æ­¥ï¼šiOS/Mac æ·å¾‘è¨­ç½®

### 4.1 æ·å¾‘æœƒåšä»€éº¼

```
1. è®€å–é¸ä¸­çš„æ–‡å­—
2. ç™¼é€åˆ° n8n Webhook
3. ç­‰å¾…å›æ‡‰ï¼ˆå¯é¸ï¼‰
4. é¡¯ç¤ºå®Œæˆé€šçŸ¥
```

### 4.2 æ·å¾‘ä»£ç¢¼æœƒåœ¨ä¸‹ä¸€æ­¥æä¾›

---

## âœ… æª¢æŸ¥æ¸…å–®

è¨­ç½®å‰ç¢ºèªä½ æœ‰ï¼š

- [ ] Supabase å¸³æˆ¶å’Œ Projectï¼ˆå·²å»ºç«‹ï¼‰
- [ ] Project URL å’Œ Anon Keyï¼ˆå·²è¤‡è£½ï¼‰
- [ ] GitHub å¸³æˆ¶ï¼ˆç”¨æ–¼ Vercel éƒ¨ç½²ï¼‰
- [ ] Google Cloud API å¸³æˆ¶ï¼ˆç”¨æ–¼ç¿»è­¯ï¼‰
- [ ] Unsplash API Keyï¼ˆç”¨æ–¼åœ–ç‰‡æœå°‹ï¼‰

---

## ğŸš€ ä¸‹ä¸€æ­¥

1. ç¶²é ç¨‹å¼ä»£ç¢¼ï¼ˆReact + Supabaseï¼‰
2. n8n å·¥ä½œæµï¼ˆå®Œæ•´ JSONï¼‰
3. iOS/Mac æ·å¾‘ä»£ç¢¼
4. Dockerfileï¼ˆå¯é¸ï¼Œç”¨æ–¼ Docker éƒ¨ç½²ï¼‰

ç­‰æˆ‘å®Œæˆé€™äº›ï¼

---

## ğŸ“ å¸¸è¦‹å•é¡Œ

**Q: å…è²»é¡åº¦å¤ ç”¨å—ï¼Ÿ**
A: å®Œå…¨å¤ ç”¨ï¼Supabase å…è²»å±¤æä¾› 500MB è³‡æ–™åº«å’Œ 50k æœˆæ´»ç”¨æˆ¶ã€‚

**Q: èƒ½è‡ªå·±è¨—ç®¡å—ï¼Ÿ**
A: å¯ä»¥ï¼Supabase æ”¯æŒè‡ªå»ºï¼ŒDocker ä¹Ÿå®Œå…¨å¯è¡Œã€‚

**Q: å¦‚ä½•æ·»åŠ èº«ä»½é©—è­‰ï¼Ÿ**
A: å¯ä»¥ç”¨ Supabase Authï¼Œä½†ä½ çš„éœ€æ±‚ç›®å‰å¯èƒ½ä¸éœ€è¦ï¼ˆå–®äººä½¿ç”¨ï¼‰ã€‚

**Q: è³‡æ–™å®‰å…¨å—ï¼Ÿ**
A: Supabase ä½¿ç”¨ PostgreSQLï¼Œæœ‰å®Œæ•´çš„åŠ å¯†å’Œå‚™ä»½ã€‚
